<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Map Website</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl1KFan0b8-CUfVZn1q87FDQNAT61fRKc&callback=initMap" async defer></script>
  <script src="script.js"></script>
</head>
<body>
  <div id="map"></div>
  <div id="side-panel">
    <h2>Charts</h2>
    <div id="charts-container"></div>
  </div>
</body>
</html>


<!--
<!DOCTYPE html>
<html>
<head>
    <style>
        #map {
            height: 100%;
        }
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #chart-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 33%;
            height: 100%;
            background: #f0f0f0;
            display: none;
            z-index: 999;
        }
        .charts-container {
            height: calc(100% - 40px); /* Adjust for close button height */
            overflow-y: auto;
            padding: 10px;
        }
        .close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="chart-panel">
        <span class="close" onclick="closeChartPanel()"></span>
        <div class="charts-container" id="chartContainer">
            Charts will be loaded here 
        </div>
    </div>

    <script>
        var map, infoWindow, chartPanel;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 20.98757293313669, lng: 105.93685697450815 },
                zoom: 15
            });

            // Create a single InfoWindow instance
            infoWindow = new google.maps.InfoWindow();

            // Create a single Chart Panel instance
            chartPanel = new google.maps.InfoWindow({
                maxWidth: 400
            });

            // Create markers
            var locations = [
                { lat: 20.98757293313669, lng: 105.93685697450815 },
                { lat: 20.9885281986878, lng: 105.93641384324708 },
                { lat: 20.989660048349222, lng: 105.936062074998 },
                { lat: 20.990689732556987, lng: 105.9356772327678 }
            ];

            locations.forEach(function(location) {
                var marker = new google.maps.Marker({
                    position: location,
                    map: map
                });

                marker.addListener('click', function() {
                    openChartPanel(location);
                });
            });
        }

        function openChartPanel(location) {
            // Open the chart panel
            chartPanel.setContent(document.getElementById('chart-panel'));
            chartPanel.setPosition(location);
            chartPanel.open(map);

            // Load the chart iframes dynamically
            var chartContainer = document.getElementById('chartContainer');
            var iframeContent = `
                <iframe width="100%" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line"></iframe>
                <iframe width="100%" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
                <iframe width="100%" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
                <iframe width="100%" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>
            `;
            var chartPanel = new google.maps.chartPanel();
            chartPanel.setContent(iframeContent);
            chartPanel.open(map, this);
        }

        function closeChartPanel() {
            chartPanel.close();
        }
    </script>
    
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl1KFan0b8-CUfVZn1q87FDQNAT61fRKc&callback=initMap">
    </script>
</body>
</html>
-->

<!--
<!DOCTYPE html>
<html>
<head>
    <style>
        /* Set the size of your map */
        #map {
            height: 100vh;
            width: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .highlighted-marker {
            background-color: #ff0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>

        var infoWindow;

        function createInfoWindow() {
            if (!infoWindow) {
                infoWindow = new google.maps.InfoWindow();
        }
    }

    
        var map;

        function updateMarkerColor(marker, isUnderLimit) {
            if (isUnderLimit) {
                marker.setIcon('http://maps.google.com/mapfiles/ms/icons/green-dot.png');
            } else {
                marker.setIcon('http://maps.google.com/mapfiles/ms/icons/yellow-dot.png');
            }
        }

        // Sample code to add markers to the map
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 20.98757293313669, lng: 105.93685697450815 },
                zoom: 15
            });

            // Create markers
            var locations = [
                { lat: 20.98757293313669, lng: 105.93685697450815 },
                { lat: 20.9885281986878, lng: 105.93641384324708 },
                { lat: 20.989660048349222, lng: 105.936062074998 },
                { lat: 20.990689732556987, lng: 105.9356772327678 }
            ];

            for (var i = 0; i < locations.length; i++) {
                var marker = new google.maps.Marker({
                    position: locations[i],
                    map: map
                });

                // Add click event listener
                marker.addListener('click', function() {
                    var iframeContent = <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>;
                                        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>;
                                        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>;
                                        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/2449920/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line&update=15"></iframe>;
                    var infoWindow = new google.maps.InfoWindow();
                    infoWindow.setContent(iframeContent);
                    infoWindow.open(map, this);
        });
    }
        }

    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl1KFan0b8-CUfVZn1q87FDQNAT61fRKc&callback=initMap">
    </script>
</body>
</html>

-->

